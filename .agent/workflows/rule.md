---
description: 核心规则自检清单 - 快速验证是否遵守规则
trigger_keywords: ["违规", "反省", "检查规则"]
---

# 核心规则自检清单

## 使用场景
- 检测到可能违规时
- 用户说"违规"、"反省"、"检查规则"时
- 开工仪式检测到异常时

---

## 快速自检（每次回复前）

### 检查1：触发词检测
- [ ] 用户说了"开始"/"继续"但我没执行 /start 吗？
- [ ] 用户说了"部署"但我没执行 /deploy 吗？
- [ ] 用户说了"验证"但我没执行 /test-verification 吗？

**如果任何一项是 ✓ → 违规！立即执行对应工作流**

### 检查2：证据检查
- [ ] 我说了"已读取"但回复中没有引用内容吗？
- [ ] 我说了"已验证"但没有展示测试输出吗？
- [ ] 我说了"完成"但没有测试证据吗？

**如果任何一项是 ✓ → 违规！必须补充证据**

### 检查3：推测检查
- [ ] 我的回复包含"应该"、"可能"、"大概"吗？
  - ✅ 有 → 检查是否有对应的证据（文件路径+行号）
  - ❌ 没有证据 → 违规！必须补充证据或修改表述

### 检查4：中途汇报检查
- [ ] 我用了 notify_user 吗？
  - ✅ 用了 → 任务100%完成了吗？
  - ❌ 没完成 → 违规！继续工作，不要中途汇报

### 检查5：文件读取检查
- [ ] 我一次并行读取超过2个文件了吗？
- [ ] 我读取超过300行的文件但没先用 view_file_outline 吗？

**如果任何一项是 ✓ → 违规！分批读取**

---

## 核心口诀

```
看了再说，不看不说
做完再报，没完不报
用证据说话，不用想象
用结果交付，不用承诺
要多少给多少，不打折扣
```

---

## 如果检测到违规

1. **立即停止**当前操作
2. **说明违规**：在回复中明确说明违规内容
3. **执行纠正**：
   - 如果是跳过工作流 → 立即执行对应工作流
   - 如果是缺少证据 → 补充证据
   - 如果是推测 → 查看实际文件并引用
4. **重新汇报**：按正确格式重新汇报

---

## 违规示例与纠正

### 示例1：跳过开工仪式
**违规**：用户说"继续"，我直接回复没执行/start
**纠正**：立即执行 `view_file .agent/workflows/start.md`

### 示例2：缺少证据
**违规**："我已读取.antigravityrules"（没有引用内容）
**纠正**："我已读取.antigravityrules L1-3: 语言强制锁、三层记忆系统..."

### 示例3：推测
**违规**："系统应该是这样设计的..."
**纠正**："根据 app/main.py L123-145: [引用代码]，系统设计是..."

### 示例4：中途汇报
**违规**：任务进行到一半就 notify_user
**纠正**：继续完成任务，全部完成后再汇报
