# TradingAgents-CN é¡¹ç›®æ¶æ„å›¾

## ğŸ“Š é¡¹ç›®è§„æ¨¡ç»Ÿè®¡

| åˆ†ç±» | æ•°é‡ |
|------|------|
| **æ€».pyæ–‡ä»¶** | 106ä¸ª |
| åç«¯APIè·¯ç”± | 37ä¸ª |
| åç«¯æœåŠ¡å±‚ | 37ä¸ª |
| AIä»£ç†æ¨¡å— | 19ä¸ª |
| å‰ç«¯é¡µé¢ | 4ä¸ª |

---

## ğŸ—ï¸ æ ¸å¿ƒç›®å½•ç»“æ„

```
/anti/ak-trading/TradingAgents-arm32/
â”œâ”€â”€ app/                    # ğŸ”µ FastAPIåç«¯ (ä¸»åŠ›)
â”‚   â”œâ”€â”€ main.py            # å…¥å£ï¼š840è¡Œï¼Œå¯åŠ¨FastAPI+å®šæ—¶ä»»åŠ¡
â”‚   â”œâ”€â”€ routers/           # APIè·¯ç”±å±‚ (37ä¸ª.py)
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡å±‚ (37ä¸ª.py)
â”‚   â”œâ”€â”€ worker/            # åå°ä»»åŠ¡ (AKShareåŒæ­¥ç­‰)
â”‚   â””â”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ tradingagents/         # ğŸ¤– AIä»£ç†æ ¸å¿ƒ
â”‚   â”œâ”€â”€ agents/            # ä»£ç†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ analysts/      # åˆ†æå¸ˆä»£ç† (5ä¸ª)
â”‚   â”‚   â”œâ”€â”€ managers/      # ç®¡ç†è€…ä»£ç† (2ä¸ª)
â”‚   â”‚   â”œâ”€â”€ traders/       # äº¤æ˜“å‘˜ä»£ç† (1ä¸ª)
â”‚   â”‚   â””â”€â”€ risk_mgmt/     # é£æ§ä»£ç† (3ä¸ª)
â”‚   â”œâ”€â”€ tools/             # æ•°æ®å·¥å…·
â”‚   â”‚   â””â”€â”€ unified_news_tool.py  # ç»Ÿä¸€æ–°é—»é‡‡é›† (72KB)
â”‚   â””â”€â”€ graph/             # LangGraphå·¥ä½œæµ
â”‚
â”œâ”€â”€ web/                   # ğŸŒ Streamlitå‰ç«¯
â”‚   â”œâ”€â”€ app.py             # ä¸»é¡µé¢ (1927è¡Œ)
â”‚   â””â”€â”€ pages/             # å­é¡µé¢ (4ä¸ª)
â”‚       â”œâ”€â”€ 1_æ‰¹é‡åˆ†æ.py
â”‚       â”œâ”€â”€ 2_å†å²åˆ†æè®°å½•.py
â”‚       â”œâ”€â”€ 3_è‡ªé€‰è‚¡ç®¡ç†.py
â”‚       â””â”€â”€ 4_ç³»ç»Ÿè®¾ç½®.py
â”‚
â””â”€â”€ frontend/              # ğŸ“± é™æ€å‰ç«¯ (å¤‡ç”¨)
    â””â”€â”€ static/index.html
```

---

## ğŸ”„ è¿è¡Œæµç¨‹æ¶æ„å›¾

```mermaid
flowchart TB
    subgraph ç”¨æˆ·å±‚
        A[ğŸŒ æµè§ˆå™¨]
    end
    
    subgraph "å‰ç«¯ (Streamlit)"
        B[web/app.py<br/>ä¸»é¡µé¢]
        B1[pages/1_æ‰¹é‡åˆ†æ.py]
        B2[pages/2_å†å²åˆ†æè®°å½•.py]
        B3[pages/3_è‡ªé€‰è‚¡ç®¡ç†.py]
        B4[pages/4_ç³»ç»Ÿè®¾ç½®.py]
    end
    
    subgraph "åç«¯ (FastAPI)"
        C[app/main.py<br/>APIå…¥å£+å®šæ—¶ä»»åŠ¡]
        
        subgraph "APIè·¯ç”±å±‚ (37ä¸ª)"
            D1[analysis.py<br/>è‚¡ç¥¨åˆ†æ]
            D2[favorites.py<br/>è‡ªé€‰è‚¡]
            D3[news_data.py<br/>æ–°é—»æ•°æ®]
            D4[reports.py<br/>æŠ¥å‘Šç®¡ç†]
        end
        
        subgraph "æœåŠ¡å±‚ (37ä¸ª)"
            E1[analysis_service.py<br/>åˆ†ææœåŠ¡43KB]
            E2[favorites_service.py<br/>è‡ªé€‰è‚¡æœåŠ¡]
            E3[news_data_service.py<br/>æ–°é—»æœåŠ¡27KB]
            E4[scheduler_service.py<br/>å®šæ—¶ä»»åŠ¡]
        end
    end
    
    subgraph "AIä»£ç†ç³»ç»Ÿ"
        F[tradingagents/graph/<br/>LangGraphå·¥ä½œæµ]
        
        subgraph "ä»£ç†è§’è‰²"
            G1[ğŸ¯ åŸºæœ¬é¢åˆ†æå¸ˆ]
            G2[ğŸ“Š æŠ€æœ¯é¢åˆ†æå¸ˆ]
            G3[ğŸ“° æ–°é—»åˆ†æå¸ˆ]
            G4[ğŸŒ ç¤¾åª’åˆ†æå¸ˆ]
            G5[ğŸ‘” æŠ•èµ„ç»„åˆç»ç†]
            G6[âš ï¸ é£é™©ç®¡ç†è€…]
        end
        
        subgraph "æ•°æ®å·¥å…·"
            H1[unified_news_tool.py<br/>ç»Ÿä¸€æ–°é—»é‡‡é›†72KB]
            H2[alpha_vantage_news.py<br/>Alpha Vantage]
        end
    end
    
    subgraph "æ•°æ®å±‚"
        I1[(MongoDB<br/>æ–°é—»/è‡ªé€‰è‚¡/æŠ¥å‘Š)]
        I2[(Redis<br/>ç¼“å­˜/é˜Ÿåˆ—)]
    end
    
    subgraph "å¤–éƒ¨æ•°æ®æº"
        J1[AKShare<br/>Aè‚¡/æ¸¯è‚¡æ•°æ®]
        J2[Serper/Google<br/>æ–°é—»æœç´¢]
        J3[DeepSeek/é€šä¹‰<br/>AIæ¨¡å‹]
    end
    
    A --> B
    B --> B1 & B2 & B3 & B4
    B --> C
    C --> D1 & D2 & D3 & D4
    D1 --> E1
    D2 --> E2
    D3 --> E3
    E1 --> F
    F --> G1 & G2 & G3 & G4
    G1 & G2 & G3 & G4 --> G5
    G5 --> G6
    G3 --> H1
    H1 --> J1 & J2
    E1 --> J3
    E2 & E3 --> I1
    E4 --> I2
```

---

## ğŸ“œ æ ¸å¿ƒ.pyæ–‡ä»¶å…³ç³»

### å…¥å£æ–‡ä»¶ â†’ æ¨¡å—è°ƒç”¨é“¾

```mermaid
flowchart LR
    subgraph å…¥å£
        M1[app/main.py<br/>FastAPIå…¥å£]
        M2[web/app.py<br/>Streamlitå…¥å£]
    end
    
    subgraph è·¯ç”±
        R1[routers/analysis.py]
        R2[routers/favorites.py]
        R3[routers/news_data.py]
    end
    
    subgraph æœåŠ¡
        S1[services/analysis_service.py]
        S2[services/favorites_service.py]
        S3[services/news_data_service.py]
    end
    
    subgraph AIä»£ç†
        A1[agents/analysts/news_analyst.py]
        A2[agents/managers/portfolio_mgr.py]
    end
    
    subgraph å·¥å…·
        T1[tools/unified_news_tool.py]
    end
    
    subgraph æ•°æ®
        D1[AKShareæ¥å£]
        D2[Serperæœç´¢]
        D3[MongoDB]
    end
    
    M1 --> R1 & R2 & R3
    M2 -->|HTTPè°ƒç”¨| R1 & R2 & R3
    R1 --> S1
    R2 --> S2
    R3 --> S3
    S1 --> A1 & A2
    A1 --> T1
    T1 --> D1 & D2
    S2 & S3 --> D3
```

---

## ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### åç«¯å…¥å£ (app/main.py)
- **è¡Œæ•°**: 840è¡Œ
- **èŒè´£**: 
  - åˆ›å»ºFastAPIåº”ç”¨
  - æ³¨å†Œ37ä¸ªAPIè·¯ç”±
  - å¯åŠ¨APSchedulerå®šæ—¶ä»»åŠ¡ï¼ˆæ–°é—»åŒæ­¥ã€æ•°æ®æ›´æ–°ï¼‰
  - æ•°æ®åº“åˆå§‹åŒ–

### å‰ç«¯å…¥å£ (web/app.py)
- **è¡Œæ•°**: 1927è¡Œ  
- **èŒè´£**:
  - Streamlitä¸»é¡µé¢
  - è‚¡ç¥¨åˆ†æè¡¨å•
  - è°ƒç”¨åç«¯API

### AIåˆ†ææ ¸å¿ƒ (services/analysis_service.py)
- **å¤§å°**: 43KB
- **èŒè´£**:
  - è°ƒç”¨LangGraphå·¥ä½œæµ
  - åè°ƒ6ä¸ªAIä»£ç†
  - ç”Ÿæˆåˆ†ææŠ¥å‘Š

### æ–°é—»æ•°æ®é‡‡é›† (tools/unified_news_tool.py)
- **å¤§å°**: 72KB (é¡¹ç›®æœ€å¤§.pyæ–‡ä»¶)
- **èŒè´£**:
  - å¤šæºæ–°é—»é‡‡é›†ï¼ˆAKShareã€Serperã€Alpha Vantageï¼‰
  - æ¸¯è‚¡/Aè‚¡/ç¾è‚¡é€‚é…
  - æ•°æ®å»é‡å’Œæ ¼å¼åŒ–

---

## ğŸ“ æŒ‰åŠŸèƒ½åˆ†ç±»çš„.pyæ–‡ä»¶æ•°é‡

| åŠŸèƒ½æ¨¡å— | æ–‡ä»¶æ•° | ä¸»è¦æ–‡ä»¶ |
|----------|--------|----------|
| **APIè·¯ç”±** | 37 | analysis.py, favorites.py, news_data.py |
| **ä¸šåŠ¡æœåŠ¡** | 37 | analysis_service.py, favorites_service.py |
| **AIä»£ç†** | 11 | news_analyst.py, portfolio_mgr.py |
| **æ•°æ®å·¥å…·** | 4 | unified_news_tool.py |
| **é…ç½®ç®¡ç†** | 9 | config_service.py, default_config.py |
| **æµ‹è¯•è„šæœ¬** | çº¦30 | test_*.py (é¡¹ç›®æ ¹ç›®å½•) |

---

## ğŸš€ å…¸å‹è¯·æ±‚æµç¨‹ç¤ºä¾‹

**ç”¨æˆ·åˆ†æ01810.HKçš„å®Œæ•´æµç¨‹**:

```
1. ç”¨æˆ·æ“ä½œ: web/app.py â†’ è¾“å…¥"01810"
         â†“
2. HTTPè¯·æ±‚: POST /api/analysis/analyze
         â†“
3. è·¯ç”±å¤„ç†: routers/analysis.py â†’ éªŒè¯å‚æ•°
         â†“
4. æœåŠ¡è°ƒç”¨: services/analysis_service.py â†’ å¯åŠ¨åˆ†æ
         â†“
5. AIå·¥ä½œæµ: tradingagents/graph/ â†’ LangGraphç¼–æ’
         â†“
6. ä»£ç†è¿è¡Œ:
   - æ–°é—»åˆ†æå¸ˆ â†’ tools/unified_news_tool.py â†’ AKShare/Serper
   - åŸºæœ¬é¢åˆ†æå¸ˆ â†’ AKShareè´¢åŠ¡æ•°æ®
   - æŠ€æœ¯é¢åˆ†æå¸ˆ â†’ AKShare Kçº¿æ•°æ®
         â†“
7. ç®¡ç†è€…æ±‡æ€»: agents/managers/portfolio_mgr.py
         â†“
8. é£é™©è¯„ä¼°: agents/risk_mgmt/
         â†“
9. æŠ¥å‘Šè¾“å‡º: ä¿å­˜åˆ°MongoDB â†’ è¿”å›å‰ç«¯
```

---

ç”Ÿæˆæ—¶é—´: 2026-01-17 08:45
